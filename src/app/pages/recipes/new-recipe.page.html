<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>
      New Recipe
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">
  <ion-card>
    <ion-card-content>
      <form (ngSubmit)="submit()" ngNativeValidate>
        <ion-input
          [(ngModel)]="model.name"
          name="name"
          type="text"
          label="Name"
          labelPlacement="floating"
          [required]="true"
        ></ion-input>
        <select-search
          [label]="'Style'"
          [placeholder]="'Choose beer style'"
          [items]="getStylesOptions()"
          (selectChanged)="changeStyle($event)"
        ></select-search>
        <ion-input
          [(ngModel)]="model.batchSize"
          name="batchSize"
          type="number"
          label="Batch size (L)"
          labelPlacement="floating"
          [required]="true"
          step="0.1"
          min="0"
        ></ion-input>
        <ion-input
          [(ngModel)]="model.boilTime"
          name="boilTime"
          type="number"
          label="Boil time (min)"
          labelPlacement="floating"
          [required]="true"
          step="1"
          min="0"
        ></ion-input>
        <ion-input
          [(ngModel)]="model.efficiency"
          name="efficiency"
          type="number"
          label="Efficiency (%)"
          labelPlacement="floating"
          [required]="true"
          step="1"
          min="0"
        ></ion-input>
        <ion-input
          [(ngModel)]="model.brewDate"
          name="brewDate"
          type="date"
          label="Brew date"
          labelPlacement="floating"
          [required]="true"
        ></ion-input>
        <ion-input
          [(ngModel)]="model.brewer"
          name="brewer"
          label="Brewer"
          labelPlacement="floating"
          [required]="true"
        ></ion-input>
        <select-search
          [label]="'Mash profile'"
          [placeholder]="'Choose mash profile'"
          [items]="getProfilesOptions()"
          (selectChanged)="changeProfile($event)"
        ></select-search>
        @if (settings?.useWaterChemistry) {
          <ion-checkbox labelPlacement="end" [(ngModel)]="useWaterProfile" [ngModelOptions]="{standalone: true}">
            Use water profile
          </ion-checkbox>
        }
        @if (useWaterProfile) {
          <select-search
            [label]="'Water profile'"
            [selectedItem]="settings?.defaultWaterProfile || 'Distilled Water'"
            [items]="getWaterOptions()"
            (selectChanged)="changeWater($event)"
          ></select-search>
        }
        <div class="ion-text-end">
          <ion-button (click)="navigateBack()" shape="round">Cancel</ion-button>
          <ion-button type="submit" shape="round">Save</ion-button>
        </div>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>


