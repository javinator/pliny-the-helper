<ion-card>
  <ion-card-content>
    <ion-list>
      <ion-list-header lines="inset">
        <ion-buttons>
          <ion-button (click)="openFermentable()">
            <ion-icon slot="icon-only" name="add"></ion-icon>
          </ion-button>
        </ion-buttons>
        <ion-label class="ion-padding-start">
          Fermentables
        </ion-label>
      </ion-list-header>
      <ion-item *ngFor="let fermentable of recipe.fermentables">
        {{ fermentable.name }}, {{ fermentable.amount | number:'1.0-3'}} kg
        <ion-buttons slot="end">
          <ion-button (click)="editFermentable(fermentable)">
            <ion-icon name="pencil" slot="icon-only"></ion-icon>
          </ion-button>
          <ion-button (click)="removeFermentable(fermentable)">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-item>
    </ion-list>
    <p *ngIf="recipe.fermentables.length === 0" class="ion-padding-start">
      No fermentables
    </p>
    <ion-list>
      <ion-list-header lines="inset">
        <ion-buttons>
          <ion-button (click)="openHop()">
            <ion-icon slot="icon-only" name="add"></ion-icon>
          </ion-button>
        </ion-buttons>
        <ion-label class="ion-padding-start">
          Hops
        </ion-label>
      </ion-list-header>
      <ion-item *ngFor="let hop of recipe.hops">
        {{ hop.name }}, {{ hop.amount ? hop.amount * 1000 : 0 | number:'1.0-1'}} g
        <ion-buttons slot="end">
          <ion-button (click)="editHop(hop)">
            <ion-icon name="pencil" slot="icon-only"></ion-icon>
          </ion-button>
          <ion-button (click)="removeHop(hop)">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-item>
    </ion-list>
    <p *ngIf="recipe.hops.length === 0" class="ion-padding-start">
      No hops
    </p>
    <ion-list>
      <ion-list-header lines="inset">
        <ion-buttons>
          <ion-button>
            <ion-icon slot="icon-only" name="add"></ion-icon>
          </ion-button>
        </ion-buttons>
        <ion-label class="ion-padding-start">
          Miscs
        </ion-label>
      </ion-list-header>
      <ion-item *ngFor="let misc of recipe.miscs">
        {{ misc.name }}
        , {{ misc.amount ? misc.amount * 1000 : 0 | number:'1.0-1'}} {{misc.amountIsWeight ? 'g' : 'ml'}}
        <ion-buttons slot="end">
          <ion-button>
            <ion-icon name="pencil" slot="icon-only"></ion-icon>
          </ion-button>
          <ion-button>
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-item>
    </ion-list>
    <p *ngIf="recipe.miscs.length === 0" class="ion-padding-start">
      No miscs
    </p>
    <ion-list>
      <ion-list-header lines="inset">
        <ion-buttons>
          <ion-button (click)="openYeast()">
            <ion-icon slot="icon-only" name="add"></ion-icon>
          </ion-button>
        </ion-buttons>
        <ion-label class="ion-padding-start">
          Yeast
        </ion-label>
      </ion-list-header>
      <ion-item *ngFor="let yeast of recipe.yeasts">
        {{ yeast.name }}
        <ion-buttons slot="end">
          <ion-button (click)="editYeast(yeast)">
            <ion-icon name="pencil" slot="icon-only"></ion-icon>
          </ion-button>
          <ion-button (click)="removeYeast(yeast)">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-item>
    </ion-list>
    <p *ngIf="recipe.yeasts.length === 0" class="ion-padding-start">
      No yeast
    </p>
  </ion-card-content>
</ion-card>

<!-- Add Fermentable -->
<ion-modal [isOpen]="addFermentableOpen" (didDismiss)="closeFermentable()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Add Fermentable</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="addFermentable()">
            <ion-label>Add</ion-label>
          </ion-button>
          <ion-button (click)="closeFermentable()">
            <ion-label>Cancel</ion-label>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-select
        label="Fermentable"
        label-placement="floating"
        interface="action-sheet"
        [value]="findFermentable()"
        (ionChange)="chooseFermentable($event)">
        <ion-select-option *ngFor="let fermentable of fermentables" [value]="fermentable">
          {{ fermentable.name }} - {{ fermentable.color | number:'1.0-1' }} Â°L
        </ion-select-option>
      </ion-select>
      <ion-input
        type="number"
        label="Amount"
        label-placement="floating"
        placeholder="kg"
        [value]="newFermentable?.amount"
        [disabled]="!newFermentable" (ionChange)="setFermentableAmount($event)">
      </ion-input>
    </ion-content>
  </ng-template>
</ion-modal>

<!-- Add Hop -->
<ion-modal [isOpen]="addHopOpen" (didDismiss)="closeHop()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Add Hop</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="addHop()">
            <ion-label>Add</ion-label>
          </ion-button>
          <ion-button (click)="closeHop()">
            <ion-label>Cancel</ion-label>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-select
        label="Hop"
        label-placement="floating"
        interface="action-sheet"
        [value]="findHop()"
        (ionChange)="chooseHop($event)">
        <ion-select-option *ngFor="let hop of hops" [value]="hop">
          {{ hop.name }} - {{ hop.alpha | number:'1.0-1' }} % AA
        </ion-select-option>
      </ion-select>
      <ion-select
        label="Usage"
        label-placement="floating"
        [value]="newHop?.use"
        (ionChange)="setHopUse($event)" [disabled]="!newHop">
        <ion-select-option value="Aroma">Aroma</ion-select-option>
        <ion-select-option value="Boil">Boil</ion-select-option>
        <ion-select-option value="Dry Hop">Dry Hop</ion-select-option>
        <ion-select-option value="First Wort">First Wort</ion-select-option>
      </ion-select>
      <ion-input
        type="number"
        label="Amount"
        label-placement="floating"
        placeholder="g"
        [disabled]="!newHop"
        [value]="newHop?.amount"
        (ionChange)="setHopAmount($event)">
      </ion-input>
      <ion-input
        type="number"
        label="Alpha Acid"
        label-placement="floating"
        placeholder="%"
        [disabled]="!newHop"
        [value]="newHop?.alpha"
        (ionChange)="setHopAlpha($event)">
      </ion-input>
      <ion-input
        *ngIf="newHop?.use === 'Aroma' || newHop?.use === 'Boil' || newHop?.use === 'Dry Hop'"
        type="number"
        label="Time"
        label-placement="floating"
        [placeholder]="newHop?.use === 'Dry Hop' ? 'days' : 'min'"
        [disabled]="!newHop"
        [value]="newHop?.time"
        (ionChange)="setHopTime($event)">
      </ion-input>
    </ion-content>
  </ng-template>
</ion-modal>

<!-- Add Yeast -->
<ion-modal [isOpen]="addYeastOpen" (didDismiss)="closeYeast()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Add Yeast</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="addYeast()">
            <ion-label>Add</ion-label>
          </ion-button>
          <ion-button (click)="closeYeast()">
            <ion-label>Cancel</ion-label>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-select
        label="Yeast"
        label-placement="floating"
        interface="action-sheet"
        [value]="findYeast()"
        (ionChange)="chooseYeast($event)">
        <ion-select-option *ngFor="let yeast of yeasts" [value]="yeast">
          {{ yeast.name }} - {{ yeast.attenuation | number:'1.0-1' }} %
        </ion-select-option>
      </ion-select>
      <ion-input
        type="number"
        label="Attenuation"
        label-placement="floating"
        placeholder="g"
        [disabled]="!newYeast"
        [value]="newYeast?.attenuation | number:'1.0.1'"
        (ionChange)="setYeastAttenuation($event)">
      </ion-input>
    </ion-content>
  </ng-template>
</ion-modal>
